{"ast":null,"code":"export const drawFunction = ctx => {\n  ctx.fillStyle = 'red';\n  ctx.fillRect(0, 0, 100, 100);\n};\nclass CandleCanvas {\n  constructor(width, height, candlesShown, candlesToDraw) {\n    this.width = void 0;\n    this.height = void 0;\n    this.candlesShown = void 0;\n    this.candlesToDraw = [];\n    this.min = void 0;\n    this.max = void 0;\n    this.gap = void 0;\n    this.candleWidth = void 0;\n    this.width = width;\n    this.height = height;\n    this.candlesShown = candlesShown;\n    const minMax = this.minMaxCalc(candlesToDraw);\n    this.min = minMax.min;\n    this.max = minMax.max;\n    const gapAndWidth = this.getGapAndCandleWidth();\n    this.gap = gapAndWidth.gap;\n    this.candleWidth = gapAndWidth.candleWidth;\n  }\n  getGapAndCandleWidth() {\n    const gap = this.width / this.candlesShown / 10;\n    const candleWidth = (this.width / this.candlesShown - gap) / 2;\n    return {\n      gap,\n      candleWidth\n    };\n  }\n  minMaxCalc(candles) {\n    const min = Math.min(...candles.map(candle => candle.low));\n    const max = Math.max(...candles.map(candle => candle.high));\n    return {\n      min,\n      max\n    };\n  }\n}\nclass Candle2D {\n  constructor(originalOpen, originalClose, originalLow, originalHigh, _candleCanvas) {\n    this.open = void 0;\n    this.close = void 0;\n    this.low = void 0;\n    this.high = void 0;\n    this.mountPoints = void 0;\n    this.getPoint = (originalPoint, candleCanvas) => {\n      const point = (candleCanvas.max - originalPoint) / (candleCanvas.max - candleCanvas.min) * candleCanvas.height;\n      return point;\n    };\n    this.open = this.getPoint(originalOpen, _candleCanvas);\n    this.close = this.getPoint(originalClose, _candleCanvas);\n    this.low = this.getPoint(originalLow, _candleCanvas);\n    this.high = this.getPoint(originalHigh, _candleCanvas);\n    this.mountPoints = this.getMountPoints();\n  }\n  // private arrow function with original point as an argument\n\n  getMountPoints(candleCanvas) {\n    const yGap = candleCanvas.candleWidth * 1.5;\n    const above = {\n      first: this.high + yGap,\n      second: this.high + yGap * 3\n    };\n    const below = {\n      first: this.close,\n      second: this.open\n    };\n    return {\n      above,\n      below\n    };\n  }\n}","map":{"version":3,"names":["drawFunction","ctx","fillStyle","fillRect","CandleCanvas","constructor","width","height","candlesShown","candlesToDraw","min","max","gap","candleWidth","minMax","minMaxCalc","gapAndWidth","getGapAndCandleWidth","candles","Math","map","candle","low","high","Candle2D","originalOpen","originalClose","originalLow","originalHigh","candleCanvas","open","close","mountPoints","getPoint","originalPoint","point","getMountPoints","yGap","above","first","second","below"],"sources":["/Users/makskornakov/Desktop/someHook/canvas-trading/src/draw.ts"],"sourcesContent":["export const drawFunction = (ctx: CanvasRenderingContext2D) => {\n  ctx.fillStyle = 'red';\n  ctx.fillRect(0, 0, 100, 100);\n};\n\ninterface candleToDraw {\n  open: number;\n  high: number;\n  low: number;\n  close: number;\n  indicators: {\n    revBar: 'buy' | 'sell';\n    fractal: 'up' | 'down';\n    alligator: {\n      jaw: number;\n      teeth: number;\n      lips: number;\n    };\n  };\n}\nclass CandleCanvas {\n  width: number;\n  height: number;\n  candlesShown: number;\n  candlesToDraw: candleToDraw[] = [];\n  min: number;\n  max: number;\n  gap: number;\n  candleWidth: number;\n\n  constructor(\n    width: number,\n    height: number,\n    candlesShown: number,\n    candlesToDraw: candleToDraw[]\n  ) {\n    this.width = width;\n    this.height = height;\n    this.candlesShown = candlesShown;\n\n    const minMax = this.minMaxCalc(candlesToDraw);\n    this.min = minMax.min;\n    this.max = minMax.max;\n\n    const gapAndWidth = this.getGapAndCandleWidth();\n    this.gap = gapAndWidth.gap;\n    this.candleWidth = gapAndWidth.candleWidth;\n  }\n  private getGapAndCandleWidth() {\n    const gap = this.width / this.candlesShown / 10;\n    const candleWidth = (this.width / this.candlesShown - gap) / 2;\n    return { gap, candleWidth };\n  }\n  private minMaxCalc(candles: candleToDraw[]) {\n    const min = Math.min(...candles.map((candle) => candle.low));\n    const max = Math.max(...candles.map((candle) => candle.high));\n    return { min, max };\n  }\n}\n\ninterface CandleMountPoints {\n  above: {\n    first: number;\n    second: number;\n  };\n  below: {\n    first: number;\n    second: number;\n  };\n}\n\nclass Candle2D {\n  open: number;\n  close: number;\n  low: number;\n  high: number;\n  mountPoints: CandleMountPoints;\n\n  constructor(\n    originalOpen: number,\n    originalClose: number,\n    originalLow: number,\n    originalHigh: number,\n    candleCanvas: CandleCanvas\n  ) {\n    this.open = this.getPoint(originalOpen, candleCanvas);\n    this.close = this.getPoint(originalClose, candleCanvas);\n    this.low = this.getPoint(originalLow, candleCanvas);\n    this.high = this.getPoint(originalHigh, candleCanvas);\n    this.mountPoints = this.getMountPoints();\n  }\n  // private arrow function with original point as an argument\n  private getPoint = (originalPoint: number, candleCanvas: CandleCanvas) => {\n    const point =\n      ((candleCanvas.max - originalPoint) /\n        (candleCanvas.max - candleCanvas.min)) *\n      candleCanvas.height;\n    return point;\n  };\n\n  private getMountPoints(candleCanvas: CandleCanvas): CandleMountPoints {\n    const yGap = candleCanvas.candleWidth * 1.5;\n    const above = {\n      first: this.high + yGap,\n      second: this.high + yGap * 3,\n    };\n    const below = {\n      first: this.close,\n      second: this.open,\n    };\n    return {\n      above,\n      below,\n    };\n  }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}